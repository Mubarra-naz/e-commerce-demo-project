<div class="container">
  <div class="accordion" id="accordionExample">
  <div class="accordion-item">
    <h2 class="accordion-header" id="headingOne">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-one" aria-expanded="true" aria-controls="collapse-one">
        Order Summary
      </button>
    </h2>
    <div id="collapse-one" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
      <div class="accordion-body">
        <div class="d-flex">
          <table class="table table-bordered table-striped">
            <thead class="bg-primary text-light">
              <td>Title</td>
              <td>Price</td>
              <td>Quantity</td>
              <td>Total price</td>
              <td>Actions</td>
            </thead>

            <tbody>
              <%= render @cart.line_items %>
            </tbody>
          </table>

          <div class="col-3 ms-2">
            <h2>Promotion</h2>
            <%= form_with url: add_coupon_user_path, local: false do |f| %>
              <div class="input-group m-1">
                <%= f.text_field :coupon_code, placeholder: 'Coupon code', class: 'form-control' %>
                <%= f.submit "Apply", class: "btn btn-outline-primary" %>
              </div>
            <% end %>

            <table class="table">
              <tbody>
                <tr>
                  <td>Total: <strong><%= @cart.line_items.size %></strong> item(s)</td>
                  <td>$<strong><%= order_total(@cart.line_items) %></strong></td>
                </tr>
                <tr id="price-table"></tr>
              </tbody>
            </table>

            <div class="actions">
              <button id='checkout' class='btn btn-primary m-2'>Proceed to Checkout</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="accordion-item">
    <h2 class="accordion-header" id="headingTwo">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-two" aria-expanded="false" aria-controls="collapse-two">
        Customer Information
      </button>
    </h2>
    <div id="collapse-two" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
      <div class="accordion-body">
        <%= render 'customer_form' %>
      </div>
    </div>
  </div>

  <div class="accordion-item">
    <h2 class="accordion-header" id="headingThree">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-three" aria-expanded="false" aria-controls="collapse-three">
        Payment Information
      </button>
    </h2>
    <div id="collapse-three" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
      <div class="accordion-body">
        <%= render 'payment_info' %>
      </div>
    </div>
  </div>
</div>
</div>
